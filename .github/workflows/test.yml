name: "build-test"
on: # rebuild any PRs and main branch changes
    push:
        tags: ["*"]

jobs:
    build: # make sure build/ci work properly
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v3
            - run: |
                  npm ci
            - run: |
                  npm run all
    test: # make sure the action works on a clean machine without building
        runs-on: ubuntu-latest
        steps:
            - name: Checkout
              uses: actions/checkout@v3

            - name: Perform Get Tag
              id: tag
              uses: ./

            - name: Output
              run: |
                  echo ${{steps.tag.outputs.release}}
                  echo ${{steps.tag.outputs.tag}}
                  echo ${{steps.tag.outputs.version}}
                  echo ${{steps.tag.outputs.major}}
                  echo ${{steps.tag.outputs.minor}}
                  echo ${{steps.tag.outputs.patch}}
